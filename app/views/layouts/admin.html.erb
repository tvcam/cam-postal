<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Admin - Cambodia Postal</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <style>
      .admin-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      .admin-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border);
      }
      .admin-header h1 {
        margin: 0;
        font-size: 1.5rem;
      }
      .admin-nav {
        display: flex;
        gap: 15px;
      }
      .admin-nav a {
        padding: 8px 16px;
        border-radius: 6px;
        text-decoration: none;
        color: var(--text);
        background: var(--card-bg);
        border: 1px solid var(--border);
      }
      .admin-nav a:hover, .admin-nav a.active {
        background: var(--accent);
        color: white;
        border-color: var(--accent);
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }
      .stat-card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
      }
      .stat-card .value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent);
      }
      .stat-card .label {
        font-size: 0.85rem;
        color: var(--muted);
        margin-top: 5px;
      }
      .period-filter {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      .period-filter a {
        padding: 6px 12px;
        border-radius: 4px;
        text-decoration: none;
        color: var(--text);
        background: var(--card-bg);
        border: 1px solid var(--border);
        font-size: 0.9rem;
      }
      .period-filter a.active {
        background: var(--accent);
        color: white;
        border-color: var(--accent);
      }
      .section {
        margin-bottom: 30px;
      }
      .section h2 {
        font-size: 1.1rem;
        margin-bottom: 15px;
        color: var(--text);
      }
      .data-table {
        width: 100%;
        border-collapse: collapse;
        background: var(--card-bg);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--border);
      }
      .data-table th, .data-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }
      .data-table th {
        background: var(--bg);
        font-weight: 600;
        font-size: 0.85rem;
        color: var(--muted);
        text-transform: uppercase;
      }
      .data-table tr:last-child td {
        border-bottom: none;
      }
      .data-table tr:hover {
        background: var(--bg);
      }
      .top-queries-list {
        display: grid;
        gap: 8px;
      }
      .top-query {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 6px;
      }
      .top-query .query {
        font-weight: 500;
      }
      .top-query .count {
        background: var(--accent);
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.85rem;
      }
      .truncate {
        max-width: 200px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .text-muted {
        color: var(--muted);
        font-size: 0.85rem;
      }
      .two-columns {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 30px;
      }
      @media (max-width: 768px) {
        .two-columns {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="admin-container" data-controller="theme">
      <header class="admin-header">
        <h1>Admin Panel</h1>
        <nav class="admin-nav">
          <%= link_to "Search Logs", admin_search_logs_path, class: controller_name == "search_logs" ? "active" : "" %>
          <%= link_to "Learned Aliases", admin_learned_aliases_path, class: controller_name == "learned_aliases" ? "active" : "" %>
          <%= link_to "Feedback", admin_feedbacks_path, class: controller_name == "feedbacks" ? "active" : "" %>
          <%= link_to "Postal Codes", admin_postal_codes_path, class: controller_name == "postal_codes" ? "active" : "" %>
          <%= link_to "Back to Site", root_path %>
        </nav>
      </header>
      <main>
        <%= yield %>
      </main>
    </div>
  </body>
</html>
