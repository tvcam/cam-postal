<% content_for :title, "#{t('province.title', name: @province.name_en)} - #{t('site.name')}" %>

<% content_for :head do %>
  <meta name="description" content="<%= t('province.meta_description', name: @province.name_en, count: @districts.count) %>">
  <link rel="canonical" href="<%= province_url(@province.name_en.parameterize) %>">
  <meta property="og:title" content="<%= t('province.title', name: @province.name_en) %>">
  <meta property="og:description" content="<%= t('province.meta_description', name: @province.name_en, count: @districts.count) %>">
<% end %>

<% content_for :structured_data do %>
  <!-- BreadcrumbList Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "<%= t('breadcrumb.home') %>",
        "item": "https://cam-postal.gotabs.net/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "<%= t('breadcrumb.provinces') %>",
        "item": "https://cam-postal.gotabs.net/provinces"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "<%= @province.name_en %>",
        "item": "https://cam-postal.gotabs.net/provinces/<%= @province.name_en.parameterize %>"
      }
    ]
  }
  </script>

  <!-- AdministrativeArea Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "AdministrativeArea",
    "name": "<%= @province.name_en %>",
    <% if @province.name_km.present? %>"alternateName": "<%= @province.name_km %>",<% end %>
    "address": {
      "@type": "PostalAddress",
      "postalCode": "<%= @province.postal_code %>",
      "addressRegion": "<%= @province.name_en %>",
      "addressCountry": "KH"
    },
    "containedInPlace": {
      "@type": "Country",
      "name": "Cambodia"
    }
  }
  </script>
<% end %>

<div class="location-page">
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <ol>
      <li><a href="<%= root_path %>"><%= t('breadcrumb.home') %></a></li>
      <li><a href="<%= provinces_path %>"><%= t('breadcrumb.provinces') %></a></li>
      <li aria-current="page"><%= @province.name_en %></li>
    </ol>
  </nav>

  <header class="location-header">
    <div class="location-title-row">
      <div>
        <h1><%= t('province.title', name: @province.name_en) %></h1>
        <% if @province.name_km.present? %>
          <p class="location-name-km"><%= @province.name_km %></p>
        <% end %>
      </div>
      <div class="location-code-badge">
        <span class="code-label"><%= t('province.code_label') %></span>
        <span class="code-value"><%= @province.postal_code %></span>
      </div>
    </div>
    <p class="location-subtitle"><%= t('province.subtitle', count: @districts.count, name: @province.name_en) %></p>
  </header>

  <div class="districts-grid">
    <% @districts.each do |district| %>
      <a href="<%= province_district_path(@province.name_en.parameterize, district.name_en.parameterize) %>" class="district-card">
        <div class="district-code"><%= district.postal_code %></div>
        <div class="district-info">
          <h2 class="district-name"><%= district.name_en %></h2>
          <% if district.name_km.present? %>
            <p class="district-name-km"><%= district.name_km %></p>
          <% end %>
        </div>
        <span class="district-arrow">→</span>
      </a>
    <% end %>
  </div>

  <div class="location-footer">
    <p><%= t('province.footer_note', name: @province.name_en, prefix: @province.postal_code[0,2]) %></p>
    <div class="footer-links">
      <a href="<%= provinces_path %>" class="back-link">← <%= t('province.back_link') %></a>
      <a href="<%= root_path %>" class="search-link"><%= t('provinces.search_link') %></a>
    </div>
  </div>
</div>
