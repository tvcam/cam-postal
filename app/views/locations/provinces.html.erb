<% content_for :title, "#{t('provinces.title')} - #{t('site.name')}" %>

<% content_for :head do %>
  <meta name="description" content="<%= t('provinces.meta_description') %>">
  <link rel="canonical" href="<%= provinces_url %>">
  <meta property="og:title" content="<%= t('provinces.title') %> - <%= t('site.name') %>">
  <meta property="og:description" content="<%= t('provinces.meta_description') %>">
<% end %>

<% content_for :structured_data do %>
  <!-- BreadcrumbList Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "<%= t('breadcrumb.home') %>",
        "item": "https://cambo-postal.com/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "<%= t('breadcrumb.provinces') %>",
        "item": "https://cambo-postal.com/provinces"
      }
    ]
  }
  </script>

  <!-- ItemList Schema for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "<%= t('provinces.title') %>",
    "description": "<%= t('provinces.meta_description') %>",
    "numberOfItems": <%= @provinces.count %>,
    "itemListElement": [
      <% @provinces.each_with_index do |province, index| %>
      {
        "@type": "ListItem",
        "position": <%= index + 1 %>,
        "name": "<%= province.name_en %>",
        "url": "https://cambo-postal.com/provinces/<%= province.name_en.parameterize %>"
      }<%= index < @provinces.count - 1 ? ',' : '' %>
      <% end %>
    ]
  }
  </script>
<% end %>

<div class="location-page">
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <ol>
      <li><a href="<%= root_path %>"><%= t('breadcrumb.home') %></a></li>
      <li aria-current="page"><%= t('breadcrumb.provinces') %></li>
    </ol>
  </nav>

  <header class="location-header">
    <h1><%= t('provinces.title') %></h1>
    <p class="location-subtitle"><%= t('provinces.subtitle', count: @provinces.count) %></p>
  </header>

  <div class="provinces-grid">
    <% @provinces.each do |province| %>
      <a href="<%= province_path(province.name_en.parameterize) %>" class="province-card">
        <div class="province-code"><%= province.postal_code %></div>
        <div class="province-info">
          <h2 class="province-name"><%= province.name_en %></h2>
          <% if province.name_km.present? %>
            <p class="province-name-km"><%= province.name_km %></p>
          <% end %>
        </div>
        <span class="province-arrow">→</span>
      </a>
    <% end %>
  </div>

  <div class="location-footer">
    <p><%= t('provinces.footer_note') %></p>
    <a href="<%= root_path %>" class="search-link">← <%= t('provinces.search_link') %></a>
  </div>
</div>
