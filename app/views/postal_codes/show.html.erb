<% content_for :title, "#{@postal_code.postal_code} - #{@postal_code.name_en} | Cambodia Postal Code" %>

<% content_for :head do %>
  <meta name="description" content="Postal code <%= @postal_code.postal_code %> for <%= @postal_code.name_en %><%= " (#{@postal_code.name_km})" if @postal_code.name_km.present? %>, <%= @postal_code.type_label %> in Cambodia<%= ", #{@postal_code.parent_location}" if @postal_code.parent_location.present? %>. Find ZIP codes for shipping and mailing to Cambodia.">
  <meta property="og:title" content="<%= @postal_code.postal_code %> - <%= @postal_code.name_en %> | Cambodia Postal Code">
  <meta property="og:description" content="Cambodia postal code <%= @postal_code.postal_code %> for <%= @postal_code.name_en %><%= ", #{@postal_code.parent_location}" if @postal_code.parent_location.present? %>. Free lookup for shipping and mail.">
  <link rel="canonical" href="<%= postal_code_url(@postal_code.postal_code) %>">
<% end %>

<% content_for :structured_data do %>
  <!-- BreadcrumbList Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://cam-postal.gotabs.net/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Provinces",
        "item": "https://cam-postal.gotabs.net/provinces"
      }<% if @postal_code.province %>,
      {
        "@type": "ListItem",
        "position": 3,
        "name": "<%= @postal_code.province.name_en %>",
        "item": "https://cam-postal.gotabs.net/provinces/<%= @postal_code.province.name_en.parameterize %>"
      }<% end %><% if @postal_code.district? || @postal_code.commune? %><% if @postal_code.district %>,
      {
        "@type": "ListItem",
        "position": <%= @postal_code.commune? ? 4 : 4 %>,
        "name": "<%= @postal_code.commune? ? @postal_code.district.name_en : @postal_code.name_en %>",
        "item": "https://cam-postal.gotabs.net/provinces/<%= @postal_code.province&.name_en&.parameterize %>/<%= (@postal_code.commune? ? @postal_code.district : @postal_code).name_en.parameterize %>"
      }<% end %><% end %><% if @postal_code.commune? %>,
      {
        "@type": "ListItem",
        "position": 5,
        "name": "<%= @postal_code.name_en %>",
        "item": "<%= postal_code_url(@postal_code.postal_code) %>"
      }<% end %>
    ]
  }
  </script>

  <!-- Place/AdministrativeArea Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "AdministrativeArea",
    "name": "<%= @postal_code.name_en %>",
    <% if @postal_code.name_km.present? %>"alternateName": "<%= @postal_code.name_km %>",<% end %>
    "address": {
      "@type": "PostalAddress",
      "postalCode": "<%= @postal_code.postal_code %>",
      "addressLocality": "<%= @postal_code.name_en %>",
      <% if @postal_code.district && !@postal_code.district? %>"addressRegion": "<%= @postal_code.district.name_en %>",<% end %>
      "addressCountry": {
        "@type": "Country",
        "name": "Cambodia",
        "alternateName": "áž€áž˜áŸ’áž–áž»áž‡áž¶"
      }
    },
    "containedInPlace": {
      "@type": "Country",
      "name": "Cambodia",
      "alternateName": "áž–áŸ’ážšáŸ‡ážšáž¶áž‡áž¶ážŽáž¶áž…áž€áŸ’ážšáž€áž˜áŸ’áž–áž»áž‡áž¶"
    }
  }
  </script>
<% end %>

<div class="show-page">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <ol>
      <li><a href="<%= root_path %>">Home</a></li>
      <li><a href="<%= provinces_path %>">Provinces</a></li>
      <% if @postal_code.province %>
        <li><a href="<%= province_path(@postal_code.province.name_en.parameterize) %>"><%= @postal_code.province.name_en %></a></li>
      <% end %>
      <% if @postal_code.commune? && @postal_code.district %>
        <li><a href="<%= province_district_path(@postal_code.province.name_en.parameterize, @postal_code.district.name_en.parameterize) %>"><%= @postal_code.district.name_en %></a></li>
      <% end %>
      <li aria-current="page"><%= @postal_code.name_en %></li>
    </ol>
  </nav>

  <div class="results-section">
    <div class="results-list">
      <div class="result-card <%= @postal_code.location_type %>"
           data-controller="copy"
           data-copy-text-value="<%= @postal_code.postal_code %>"
           data-action="click->copy#copy">
        <div class="result-header">
          <span class="postal-code"><%= @postal_code.postal_code %></span>
          <span class="location-type <%= @postal_code.location_type %>"><%= @postal_code.type_label %></span>
        </div>
        <div class="result-body">
          <h1 class="name-en"><%= @postal_code.name_en %></h1>
          <% if @postal_code.name_km.present? %>
            <p class="name-km"><%= @postal_code.name_km %></p>
          <% end %>
          <% if @postal_code.parent_location.present? %>
            <p class="parent-location"><%= @postal_code.parent_location %></p>
          <% end %>
        </div>
        <span class="copy-hint">Click to copy</span>
      </div>
    </div>

    <!-- Related postal codes section -->
    <% if @related_codes&.any? %>
      <div class="related-section">
        <h2>Related Postal Codes in <%= @postal_code.commune? ? @postal_code.district&.name_en : @postal_code.province&.name_en %></h2>
        <div class="related-list">
          <% @related_codes.first(6).each do |related| %>
            <a href="<%= postal_code_path(related.postal_code) %>" class="related-link">
              <span class="related-code"><%= related.postal_code %></span>
              <span class="related-name"><%= related.name_en %></span>
            </a>
          <% end %>
        </div>
        <% parent = @postal_code.commune? ? @postal_code.district : @postal_code.province %>
        <% if parent %>
          <a href="<%= @postal_code.commune? ? province_district_path(@postal_code.province.name_en.parameterize, @postal_code.district.name_en.parameterize) : province_path(@postal_code.province.name_en.parameterize) %>" class="view-all-link">
            View all in <%= parent.name_en %> â†’
          </a>
        <% end %>
      </div>
    <% end %>

    <div class="unity-slogan">
      <p class="slogan-km">ðŸ‡°ðŸ‡­ ážŸáž¶áž˜áž‚áŸ’áž‚áž¸áž‡áž¶áž€áž˜áŸ’áž›áž¶áŸ†áž„ ðŸ‡°ðŸ‡­</p>
      <p class="slogan-en">Unity is Strength</p>
    </div>
  </div>
</div>
